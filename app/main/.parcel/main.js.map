{"version":3,"sources":["classes/label.ts","api/label.ts","classes/feature.ts","api/feature.ts","schemas/schema.ts","main.ts","../../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":[],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourceRoot":"..","sourcesContent":["export default class Label {\n  constructor(key: string, name: string, colour: string) {\n    this.key = key;\n    this.name = name;\n    this.colour = colour;\n  }\n}\n","import { Label } from \"../classes/label\";\n\nexport const getLabels = (obj, ctx) => {\n  return ctx.db\n    .all(\"SELECT key, name, colour FROM label\")\n    .then(result => result.map(r => new Label(r.key, r.name, r.colour)));\n};\n\n// TODO: Not sure why this is an object for key\nexport const getLabel = (key, ctx) => {\n  return ctx.db\n    .get(\"SELECT key, name, colour FROM label WHERE key = $key\", {\n      $key: key.key\n    })\n    .then(result => {\n      return new Label(result.key, result.name, result.colour);\n    });\n};\n\nexport const createLabel = (label, ctx) => {\n  return ctx.db\n    .run(\n      \"INSERT INTO label (key, name, colour ) VALUES (?, ?, ?)\",\n      label.key,\n      label.name,\n      label.colour\n    )\n    .then(result => {\n      return result.changes\n        ? getLabel({ key: label.key }, ctx)\n        : new Error(\"Unable to create label\");\n    });\n};\n\nexport const renameLabel = (label, ctx) => {\n  return ctx.db\n    .run(`UPDATE label SET name = $name WHERE key = $key`, {\n      $key: label.key,\n      $name: label.name\n    })\n    .then(result => {\n      return result.changes\n        ? getLabel({ key: label.key }, ctx)\n        : new Error(\"Unable to rename label\");\n    });\n};\n\nexport const recolourLabel = (label, ctx) => {\n  return ctx.db\n    .run(\"UPDATE label SET colour = $colour WHERE key = $key\", {\n      $key: label.key,\n      $colour: label.colour\n    })\n    .then(result => {\n      return result.changes\n        ? getLabel({ key: label.key }, ctx)\n        : new Error(\"Unable to recolour label\");\n    });\n};\n\nexport const deleteLabel = (input, ctx) => {\n  return ctx.db\n    .run(\"DELETE FROM label WHERE key = $key\", { $key: input.key })\n    .then(result => {\n      return result.changes\n        ? input.key\n        : new Error(`Unable to delete label with key ${input.key}`);\n    });\n};\n","export default class Feature {\n  constructor(key: string, name: string, enabled: boolean) {\n    this.key = key;\n    this.name = name;\n    this.enabled = enabled;\n  }\n}\n","import Feature from \"../classes/feature\";\n\nexport const getFeatures = (obj, ctx) => {\n  return ctx.db\n    .all(\"SELECT key, name, enabled FROM feature\")\n    .then((result) => result.map((r) => new Feature(r.key, r.name, r.enabled)));\n};\n\nexport const getFeature = (key: { key: string }, ctx) => {\n  return ctx.db\n    .get(\"SELECT key, name, enabled FROM feature WHERE key = $key\", {\n      $key: key.key,\n    })\n    .then((result) => {\n      return new Feature(result.key, result.name, result.enabled);\n    });\n};\n\nexport const setFeature = (data: { key: string; enabled: boolean }, ctx) => {\n  return ctx.db\n    .run(\"UPDATE feature SET enabled = $enabled WHERE key = $key\", {\n      $enabled: data.enabled,\n      $key: data.key,\n    })\n    .then((result) => {\n      return result.changes\n        ? getFeature({ key: data.key }, ctx)\n        : new Error(\"Unable to create feature\");\n    });\n};\n\nexport const createFeature = (\n  feature: { key: string; name: string; enabled: boolean },\n  ctx\n) => {\n  return ctx.db\n    .run(\n      \"INSERT INTO feature (key, name, enabled) VALUES (?, ?, ?)\",\n      feature.key,\n      feature.name,\n      feature.enabled\n    )\n    .then((result) => {\n      return result.changes\n        ? getFeature({ key: feature.key }, ctx)\n        : new Error(\"Unable to create feature\");\n    });\n};\n","import { buildSchema } from \"graphql\";\nimport {\n  getLabels,\n  getLabel,\n  createLabel,\n  deleteLabel,\n  renameLabel,\n  recolourLabel\n} from \"../api/label\";\nimport {\n  createFeature,\n  getFeature,\n  getFeatures,\n  setFeature\n} from \"../api/feature\";\n\n// TODO: Work out where / how to store ordering\nexport const schema = buildSchema(`\n  type Label {\n    key: String!,\n    name: String,\n    colour: String,\n  }\n\n  type Calendar {\n    key: String!,\n    name: String,\n  }\n\n  type Feature {\n    key: String!,\n    name: String!,\n    enabled: Boolean,\n  }\n\n  type Reminder {\n    key: String!,\n    text: String,\n    deleted: Boolean,\n    remindAt: String,\n    item: Item \n    lastUpdatedAt: String,\n    deletedAt: String,\n    createdAt: String,\n  }\n\n  type Event {\n    key: String!,\n    title: String,\n    start: String,\n    end: String,\n    description: String,\n    allDay: Boolean,\n    calendar: Calendar,\n  }\n\n  type Area {\n    key: String!,\n    name: String,\n    deleted: Boolean,\n    description: String,\n    lastUpdatedAt: String,\n    deletedAt: String,\n    createdAt: String,\n  }\n\n  type Project {\n    key: String!,\n    name: String,\n    deleted:  Boolean,\n    description: String,\n    lastUpdatedAt: String,\n    deletedAt: String,\n    createdAt: String,\n    startAt: String,\n    endAt: String,\n    area: Area,\n  }\n\n  type Item {\n    key: String!,\n    type: String, \n    text: String,\n    deleted: Boolean,\n    completed: Boolean\n    parent: Item,\n    project: Project, \n    dueDate: String,\n    scheduledDate: String,\n    lastUpdatedAt: String,\n    completedAt: String,\n    createdAt: String,\n    deletedAt: String,\n    repeat: String,\n    label: Label, \n    area: Area,\n  }\n\n\n  input LabelInput {\n    key: String!,\n    name: String!,\n    colour: String!\n  }\n\n  input RenameLabelInput {\n   key: String!,\n   name: String!\n }\n  input RecolourLabelInput {\n   key: String!,\n   colour: String!\n}\n\n  input DeleteLabelInput {\n   key: String!\n  }\n\n  input FeatureInput{\n    key: String!,\n    name: String!,\n    enabled: Boolean!\n  }\n  input SetFeatureInput{\n    key: String!,\n    enabled: Boolean!\n  }\n\ntype Query {\n    labels: [Label],\n    label(key: String!): Label,\n    features: [Feature],\n    feature(key: String!): Feature\n  }\n\ntype Mutation {\n    createLabel(input: LabelInput!) : Label,\n    renameLabel(input: RenameLabelInput!) : Label,\n    recolourLabel(input: RecolourLabelInput!) : Label,\n    deleteLabel(input: DeleteLabelInput!): String,\n    createFeature(input: FeatureInput!) : Feature,\n    setFeature(input: SetFeatureInput!) : Feature,\n}\n\n`);\n\nexport const rootValue = {\n  labels: (obj, ctx) => {\n    return getLabels(obj, ctx);\n  },\n  label: (key, ctx) => {\n    return getLabel(key, ctx);\n  },\n  createLabel: ({ input }, ctx) => {\n    return createLabel(input, ctx);\n  },\n  renameLabel: ({ input }, ctx) => {\n    return renameLabel(input, ctx);\n  },\n  recolourLabel: ({ input }, ctx) => {\n    return recolourLabel(input, ctx);\n  },\n  deleteLabel: ({ input }, ctx) => {\n    return deleteLabel(input, ctx);\n  },\n  feature: (key, ctx) => {\n    return getFeature(key, ctx);\n  },\n  features: (obj, ctx) => {\n    return getFeatures(obj, ctx);\n  },\n  createFeature: ({ input }, ctx) => {\n    return createFeature(input, ctx);\n  },\n  setFeature: ({ input }, ctx) => {\n    return setFeature(input, ctx);\n  }\n};\n","import { ipcMain, app, net, BrowserWindow, globalShortcut } from \"electron\";\nimport * as isDev from \"electron-is-dev\";\nimport * as path from \"path\";\nimport applescript from \"applescript\";\nimport * as semver from \"semver\";\nimport express from \"express\";\nimport { graphqlHTTP } from \"express-graphql\";\nimport { schema, rootValue } from \"./schemas/schema\";\nimport * as sqlite from \"sqlite\";\nimport * as sqlite3 from \"sqlite3\";\n\nconst GRAPHQL_PORT = 8080;\n(async () => {\n  const db = await sqlite.open({\n    filename: \"./database.db\",\n    driver: sqlite3.Database,\n  });\n  await db.run(\"PRAGMA foreign_keys=on\");\n  await db.migrate({\n    migrationsPath: path.join(process.cwd(), \"/app/main/migrations\"),\n  });\n\n  const graphQLApp = await express();\n  // Enable cors\n  graphQLApp.use(\"/graphql\", function (req, res, next) {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\n      \"Access-Control-Allow-Headers\",\n      \"Content-Type, Authorization, Content-Length, X-Requested-With\"\n    );\n    if (req.method === \"OPTIONS\") {\n      res.sendStatus(200);\n    } else {\n      next();\n    }\n  });\n\n  graphQLApp.use(\n    \"/graphql\",\n    graphqlHTTP({\n      rootValue: rootValue,\n      graphiql: true,\n      pretty: true,\n      schema: schema,\n      customFormatErrorFn: (error) => ({\n        message: error.message,\n        locations: error.locations,\n        stack: error.stack ? error.stack.split(\"\\n\") : [],\n        path: error.path,\n      }),\n      context: {\n        db: {\n          get: (...args) => db.get(...args),\n          all: (...args) => db.all(...args),\n          run: (...args) => db.run(...args),\n        },\n      },\n    })\n  );\n\n  const graphQLServer = await graphQLApp.listen(GRAPHQL_PORT, () => {\n    console.log(\n      `GraphQL server is now running on http://localhost:${GRAPHQL_PORT}`\n    );\n  });\n})();\nlet mainWindow, quickAddWindow;\nlet calendar = \"\";\nconst getMailLink = () => {\n  const script = `\n    tell application \"Mail\"\n\t\tset theSelection to selection\n\t\tset theMessage to item 1 of theSelection\n\t\tset theSubject to subject of theMessage\n\t\tset theSender to sender of theMessage\n\t\tset theID to message id of theMessage\n\t\tset theLink to \"message://%3c\" & theID & \"%3e\"\n        set theItem to \"TODO [\" & theSubject & \" - \" & theSender & \" ](\" & theLink & \")\"\n        set the clipboard to theItem\n\t\treturn theItem\n\tend tell\n`;\n  applescript.execString(script, (err, rtn) => {\n    if (err) {\n      console.log(err);\n    }\n    mainWindow.webContents.send(\"create-task\", {\n      text: rtn,\n      source: \"Apple Mail\",\n    });\n  });\n};\n\nconst getCalendars = () => {\n  const script = `\n\t    tell application \"Calendar\"\n\t        return name of calendars\n        end tell\n`;\n  applescript.execString(script, (err, cals) => {\n    if (err) {\n      console.log(err);\n    }\n    mainWindow.webContents.send(\"calendars\", cals);\n  });\n};\n\nconst getCalendarEvents = (calendarName: string) => {\n  const script = `\n        set theStartDate to current date\n        set hours of theStartDate to 0\n        set minutes of theStartDate to 0\n        set seconds of theStartDate to 0\n        set theEndDate to theStartDate + (7 * days) - 1\n        set output to {}\n        tell application \"Calendar\"\n            tell calendar \"${calendarName}\"\n                set allEvents to (every event whose (start date) is greater than or equal to theStartDate and (start date) is less than theEndDate)\n                repeat with e in allEvents\n                    set startDate to (start date of e)\n                    set endDate to (end date of e)\n                    copy {(uid of e), (short date string of startDate), (time string of startDate), (short date string of endDate), (time string of endDate), (summary of e), (description of e), (status of e), (time to GMT)/hours} to end of output\n                end repeat\n            end tell\n        end tell\n        return output\n        `;\n\n  applescript.execString(script, (err, rtn) => {\n    if (err) {\n      console.log(err);\n    }\n    const headers = [\n      \"id\",\n      \"startDate\",\n      \"startTime\",\n      \"endDate\",\n      \"endTime\",\n      \"summary\",\n      \"description\",\n      \"status\",\n      \"tzOffset\",\n    ];\n    const events = Object.values(rtn).map((r) => {\n      return r.reduce((acc, cur, index) => {\n        acc[headers[index]] = cur;\n        return acc;\n      }, {});\n    });\n    console.log(`Sending events back to FE`);\n    mainWindow.webContents.send(\"events\", events);\n  });\n};\n\nconst getOutlookLink = () => {\n  const script = `\n    tell application \"Microsoft Outlook\"\n    set theSelection to selection\n    set theMessage to item 1 of theSelection\n    set theSubject to subject of theMessage\n    set theSender to sender of theMessage\n    set theID to message id of theMessage\n    set theLink to \"outlook://\" & theID\n    set theItem to \"TODO [\" & theSubject & \" - \" & theSender & \" ](\" & theLink & \")\"\n    set the clipboard to theItem\n    return theItem\nend tell\n`;\n  applescript.execString(script, (err, rtn) => {\n    if (err) {\n      console.log(err);\n    }\n  });\n};\n\nconst openOutlookLink = (url: string) => {\n  const script = `\n\tset the messageId to text 11 thru -1 of ${url}\n\ttell application \"Microsoft Outlook\"\n        open message id messageId\n        activate\n\tend tell\n`;\n  applescript.execString(script, (err, rtn) => {\n    if (err) {\n      console.log(err);\n    }\n  });\n};\n\nconst checkForNewVersion = () => {\n  const releasesURL =\n    \" https://api.github.com/repos/ryankscott/finish-em/releases\";\n\n  const request = net.request(releasesURL);\n  request.on(\"response\", (response) => {\n    let rawData = \"\";\n    response.on(\"data\", (chunk) => {\n      rawData += chunk;\n    });\n    response.on(\"end\", () => {\n      try {\n        const response = JSON.parse(rawData);\n        // Get rid of draft versions and prereleases and get the last published\n        const sortedReleases = response\n          .filter((r) => r.draft == false)\n          .filter((r) => r.prerelease == false)\n          .sort((a, b) => b.published_at - a.published_at);\n        // Get the semver of the release\n        const latestRelease = sortedReleases[0];\n        // If there's a new version\n        if (semver.gt(latestRelease.name, app.getVersion())) {\n          const macRelease = latestRelease.assets.find((a) =>\n            a.name.endsWith(\".dmg\")\n          );\n          // Send an event to the front-end to push a notification\n          mainWindow.webContents.send(\"new-version\", {\n            version: latestRelease.name,\n            publishedAt: latestRelease.published_at,\n            downloadUrl: macRelease.browser_download_url,\n            releaseURL: latestRelease.html_url,\n            releaseNotes: latestRelease.body,\n          });\n        }\n      } catch (e) {\n        console.error(e.message);\n      }\n    });\n  });\n  request.on(\"error\", (error) => {\n    setTimeout(checkForNewVersion, 60 * 60 * 1000);\n  });\n  request.end();\n};\n\nfunction createQuickAddWindow() {\n  if (quickAddWindow) return;\n  quickAddWindow = new BrowserWindow({\n    width: 580,\n    transparent: true,\n    frame: false,\n    resizable: false,\n    movable: true,\n    webPreferences: {\n      nodeIntegration: true,\n      preload: path.join(process.cwd() + \"/app/main/preload.ts\"),\n      enableRemoteModule: true,\n    },\n  });\n\n  quickAddWindow.loadURL(\n    isDev\n      ? \"http://localhost:1234?quickAdd\"\n      : `file://${__dirname}/build/index.html?quickAdd`\n  );\n  // Open dev tools\n  // quickAddWindow.webContents.openDevTools()\n\n  // On closing derefernce\n  quickAddWindow.on(\"closed\", () => {\n    quickAddWindow = null;\n  });\n}\n\nfunction createMainWindow() {\n  // Create the browser window.\n  console.log(path.join(process.cwd() + \"/app/main/preload.ts\"));\n  mainWindow = new BrowserWindow({\n    width: 1200,\n    height: 850,\n    minWidth: 550,\n    webPreferences: {\n      nodeIntegration: true,\n      preload: path.join(process.cwd() + \"/app/main/preload.ts\"),\n      enableRemoteModule: true,\n    },\n  });\n\n  // Load the index.html of the app.\n  mainWindow.loadURL(\n    isDev\n      ? \"http://localhost:1124?main\"\n      : `file://${__dirname}/build/index.html?main`\n  );\n\n  // Open dev tools\n  // mainWindow.webContents.openDevTools();\n\n  // On closing derefernce\n  // TODO: Change to an array for multi-window support\n  mainWindow.on(\"closed\", () => {\n    mainWindow = null;\n  });\n\n  const handleRedirect = (e, url) => {\n    if (url != mainWindow.getURL()) {\n      e.preventDefault();\n      require(\"electron\").shell.openExternal(url);\n    }\n  };\n\n  mainWindow.webContents.on(\"will-navigate\", handleRedirect);\n  mainWindow.webContents.on(\"new-window\", handleRedirect);\n}\n\napp.on(\"ready\", () => {\n  createMainWindow();\n  globalShortcut.register(\"Command+Shift+N\", createQuickAddWindow);\n  globalShortcut.register(\"Command+Shift+A\", getMailLink);\n  globalShortcut.register(\"Command+Shift+O\", getOutlookLink);\n  try {\n    checkForNewVersion();\n  } catch (e) {\n    console.error(`Failed to get new version, trying again in 1hr: ${e}`);\n    setTimeout(checkForNewVersion, 1000 * 60 * 60 * 24);\n  }\n\n  // setTimeout(() => {\n  //     const myNotification = new Notification('Foo', {\n  //         body: 'Lorem Ipsum Dolor Sit Amet',\n  //     })\n  //     myNotification.show()\n  // }, 1000 * 5)\n\n  // Get the features enabled in the UI and do any conditional stuff\n  setTimeout(() => {\n    mainWindow.webContents.send(\"get-features\");\n    ipcMain.once(\"get-features-reply\", (event, features) => {\n      if (features.calendarIntegration) {\n        if (calendar) {\n          console.log(`Getting calendar events for ${calendar}`);\n          setInterval(getCalendarEvents(calendar), 1000 * 60 * 30);\n        }\n      }\n    });\n  }, 1000 * 5);\n});\n\n// Quit when all windows are closed.\napp.on(\"window-all-closed\", () => {\n  // On macOS it is common for applications and their menu bar\n  // to stay active until the user quits explicitly with Cmd + Q\n  if (process.platform !== \"darwin\") {\n    app.quit();\n  }\n  globalShortcut.unregisterAll();\n});\n\napp.on(\"activate\", () => {\n  // On macOS it's common to re-create a window in the app when the\n  // dock icon is clicked and there are no other windows open.\n  if (mainWindow === null) {\n    createMainWindow();\n  }\n});\n\nipcMain.on(\"close-quickadd\", (event, arg) => {\n  if (quickAddWindow) {\n    quickAddWindow.close();\n  }\n});\n\nipcMain.on(\"get-calendars\", (event, arg) => {\n  const allCalendars = getCalendars();\n  mainWindow.webContents.send(\"calendars\", allCalendars);\n});\n\nipcMain.on(\"open-outlook-link\", (event, arg) => {\n  openOutlookLink(arg.url);\n});\n\n// This is to send events between quick add and main window\nipcMain.on(\"create-task\", (event, arg) => {\n  mainWindow.webContents.send(\"create-task\", arg);\n});\n\nipcMain.on(\"set-calendar\", (event, cal) => {\n  console.log(`Setting calendar to: ${cal}`);\n  calendar = cal;\n  getCalendarEvents(calendar);\n});\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}